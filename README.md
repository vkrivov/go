<h1>Скрипт для работы с SonarQube и локальным репозиторием Git</h1>

Цель проекта – возможность выполнить быструю проверку качества кода перед тем, как помещать доработки в рабочее хранилище. В этой связи используется только локальный репозиторий, push в публичный репозиторий не делается

Проект реализует следующий функционал: имеется список объектов конфигурации (файл *список объектов.ini*). Данный список разработчик составляет вручную в соответствии с выполняемыми задачами. Список задаётся в текстовом формате в наглядной форме. 

<br>

Пример списка:

```yml

Каталог: Тестовая база УТ
Строка соединения: File="C:\Dev\UT"; Usr="Admin"; Pwd="Admin"
[
ОбщийМодуль.CRMЛокализация
Документ.АвансовыйОтчет
Документ.АвансовыйОтчет.Форма.ФормаДокумента
Справочник.Номенклатура
Справочник.Номенклатура.Форма.ФормаСписка
C:\Разработка\Печать реестра.epf
]

```
<br>

Далее вручную или по расписанию запускается скрипт *go.os*. Скрипт на основании списка формирует командную строку пакетного режима запуска конфигуратора с нужными параметрами. Конфигуратор выгружает объекты из списка в файлы. Для этих файлов делается `git add` и `git commit`, после чего запускается **sonar-scanner**

<br>

>[!Note]
>Скрипт выгружает в Git **все файлы**, а не только тексты модулей. Данное решение принято осознано. Git позволяет увидеть изменения только в текстовых файлах. Изменения, сделанные с помощью визуального конструктора, git не показывает. Вместе с тем, анализ xml файла формы зачастую позволяет получить об этом хотя бы общее представление. К примеру, достаточно легко можно понять, что после вот этого коммита на форме появилась вот эта кнопка.
>
>С другой стороны, для анализа кода в каталог сканера выгружаются **только тексты модулей**


<br>


Прочие файлы:
 + <i>init.os</i> – подготовка структуры каталогов и создание локального репозитория.<br>
 + <i>настройки.ini</i> – настройки, связанные с системой (пути к программам, токен Sonar и тому подобное)


## Установка
Распаковать файлы в нужный каталог. Название и расположение каталога произвольные. После этого выполнить этом каталоге команду `oscript init.os` (данный скрипт нужно выполнить только один раз, при установке)


## Настройка
Отредактировать файл <i>настройки.ini</i> в соответствии с настройками системы.<br>
Отредактировать файл <i>список объектов.ini</i> в соответствии с текущими задачами.


## Выполнение
Выполнить команду

```bash
oscript go.os "...Комментарий к коммиту..."
```
либо, если комментарий не нужен, то

```bash
oscript go.os -nc
```


## Требования


Скрипт написан на [OneScript](https://github.com/EvilBeaver/OneScript), предполагается, что в системе установлены и настроены:
 + [**OneScript**](https://oscript.io/)
 + [**Git**](https://git-scm.com/)
 + [**Sonarqube** и **Sonar-scanner**](https://www.sonarsource.com/)

<br><br>

## Страница проекта на Инфостарт

<a href="https://infostart.ru/1c/tools/2139629/"><img src="https://infostart.ru/bitrix/templates/sandbox_empty/assets/tpl/abo/img/logo.svg" border="0" alt="Инфостарт: новости индустрии автоматизации учета"><br>Как упростить подготовку конфигурации для работы с Git и SonarQube</a>
